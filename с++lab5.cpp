#include <iostream>
using namespace std;

/**
 * Рекурсивная функция для вычисления наибольшего общего делителя (НОД)
 * двух целых чисел с использованием алгоритма Евклида.
 * 
 * Алгоритм основан на математическом свойстве:
 * НОД(a, b) = НОД(b, a mod b), где a mod b - остаток от деления a на b
 * 
 * @param a - первое целое число
 * @param b - второе целое число
 * @return наибольший общий делитель чисел a и b
 */
int gcd(int a, int b) {
    // БАЗОВЫЙ СЛУЧАЙ РЕКУРСИИ
    // Если второе число b равно 0, это означает, что мы достигли точки,
    // где одно число делится на другое без остатка.
    // В этом случае первое число a и является наибольшим общим делителем.
    if (b == 0) {
        // Выводим отладочную информацию для понимания процесса
        cout << "✓ Достигнут базовый случай: b = 0, возвращаем НОД = " << a << endl;
        return a;
    }
    
    // Вычисляем остаток от деления a на b для отладки
    int remainder = a % b;
    
    // Выводим информацию о текущем рекурсивном вызове
    cout << "↻ Рекурсивный вызов: НОД(" << a << ", " << b << ") → ";
    cout << "НОД(" << b << ", " << remainder << ")" << endl;
    
    // РЕКУРСИВНЫЙ СЛУЧАЙ
    // Вызываем эту же функцию с новыми аргументами:
    // - первый аргумент: предыдущий второй аргумент (b)
    // - второй аргумент: остаток от деления a на b (a % b)
    // Это соответствует математической формуле НОД(a, b) = НОД(b, a mod b)
    return gcd(b, a % b);
}

/**
 * Вспомогательная функция для демонстрации процесса вычисления НОД
 * с подробными объяснениями
 * 
 * @param a - первое число
 * @param b - второе число
 */
void demonstrateGCD(int a, int b) {
    cout << "\n==================================================" << endl;
    cout << "ВЫЧИСЛЕНИЕ НОД ДЛЯ ЧИСЕЛ " << a << " И " << b << endl;
    cout << "==================================================" << endl;
    
    cout << "\nАЛГОРИТМ ЕВКЛИДА:" << endl;
    cout << "  НОД(a, b) = НОД(b, a mod b)" << endl;
    cout << "  Процесс повторяется до тех пор, пока b не станет 0" << endl;
    
    cout << "\nПРОЦЕСС ВЫЧИСЛЕНИЯ:" << endl;
    int result = gcd(a, b);
    
    cout << "\n══════════════════════════════════════════════════" << endl;
    cout << "РЕЗУЛЬТАТ: НОД(" << a << ", " << b << ") = " << result << endl;
    cout << "══════════════════════════════════════════════════" << endl;
    
    // Проверка корректности результата
    cout << "\nПРОВЕРКА РЕЗУЛЬТАТА:" << endl;
    cout << a << " / " << result << " = " << (a / result);
    cout << " (делится без остатка)" << endl;
    cout << b << " / " << result << " = " << (b / result);
    cout << " (делится без остатка)" << endl;
}

/**
 * Функция для демонстрации математических шагов алгоритма Евклида
 * без рекурсивных вызовов
 * 
 * @param a - первое число
 * @param b - второе число
 */
void showEuclideanSteps(int a, int b) {
    cout << "\nМАТЕМАТИЧЕСКИЕ ШАГИ АЛГОРИТМА ЕВКЛИДА:" << endl;
    int originalA = a, originalB = b;
    int step = 1;
    
    while (b != 0) {
        int remainder = a % b;
        cout << "Шаг " << step << ": НОД(" << a << ", " << b << ") = ";
        cout << "НОД(" << b << ", " << remainder << ")" << endl;
        a = b;
        b = remainder;
        step++;
    }
    
    cout << "Финальный шаг: НОД(" << a << ", 0) = " << a << endl;
    cout << "∴ НОД(" << originalA << ", " << originalB << ") = " << a << endl;
}

/**
 * Основная функция программы
 */
int main() {
    cout << "ПРОГРАММА ДЛЯ ВЫЧИСЛЕНИЯ НАИБОЛЬШЕГО ОБЩЕГО ДЕЛИТЕЛЯ" << endl;
    cout << "с использованием рекурсивного алгоритма Евклида" << endl;
    
    // Основной пример вычисления НОД
    int num1 = 56, num2 = 98;
    demonstrateGCD(num1, num2);
    
    // Показываем математические шаги
    showEuclideanSteps(num1, num2);
    
    // Дополнительные примеры для демонстрации
    cout << "\n==================================================" << endl;
    cout << "ДОПОЛНИТЕЛЬНЫЕ ПРИМЕРЫ" << endl;
    cout << "==================================================" << endl;
    
    // Массив тестовых случаев
    int testCases[][2] = {
        {48, 18},    // Ожидаемый НОД: 6
        {17, 13},    // Ожидаемый НОД: 1 (взаимно простые числа)
        {100, 25},   // Ожидаемый НОД: 25
        {81, 27},    // Ожидаемый НОД: 27
        {1071, 462}  // Ожидаемый НОД: 21
    };
    
    int numTestCases = sizeof(testCases) / sizeof(testCases[0]);
    
    for (int i = 0; i < numTestCases; i++) {
        int x = testCases[i][0];
        int y = testCases[i][1];
        
        cout << "\nПример " << (i + 1) << ": НОД(" << x << ", " << y << ")" << endl;
        int result = gcd(x, y);
        cout << "Результат: " << result << endl;
    }
    
    // Объяснение особенностей алгоритма
    cout << "\n==================================================" << endl;
    cout << "ОСОБЕННОСТИ АЛГОРИТМА ЕВКЛИДА" << endl;
    cout << "==================================================" << endl;
    cout << "1. Рекурсия продолжается до базового случая (b = 0)" << endl;
    cout << "2. На каждом шаге числа уменьшаются" << endl;
    cout << "3. Эффективность: O(log(min(a, b)))" << endl;
    cout << "4. Всегда находит правильный НОД" << endl;
    cout << "5. Работает с любыми целыми числами" << endl;
    cout << "6. Основан на фундаментальном математическом свойстве" << endl;
    
    cout << "\nПрограмма завершена успешно!" << endl;
    return 0;
}
